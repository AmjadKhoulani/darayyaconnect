import{r as u,u as k,j as e,H as C}from"./app-uhljFjo-.js";import{I as l}from"./InputLabel-DHkknhcX.js";import{M as S}from"./Modal-LOLSzzto.js";import{P as h}from"./PrimaryButton-DxAD7fVD.js";import{S as F}from"./SecondaryButton-Cb-pp1iS.js";import{T as i}from"./TextInput-C31x4pke.js";import{A as I}from"./AdminLayout-BVqxDbRV.js";import"./transition-uFJtBX_F.js";import"./dialog-BN7N_xnT.js";import"./with-selector-BonvddMt.js";function T({auth:p,items:g}){const[j,o]=u.useState(!1),[r,c]=u.useState(null),{data:a,setData:s,post:y,put:f,delete:v,processing:N,errors:d,reset:x}=k({name:"",phone:"",type:"",category:"official",icon:"Building2",description:"",latitude:"",longitude:""}),m=(t=null)=>{c(t),t?s({name:t.name,phone:t.phone,type:t.type,category:t.category,icon:t.icon||"Building2",description:"",latitude:t.latitude||"",longitude:t.longitude||""}):(x(),s("category","official")),o(!0)},n=()=>{o(!1),c(null),x()},w=t=>{t.preventDefault(),r?f(route("admin.directory.update",r.id),{onSuccess:n}):y(route("admin.directory.store"),{onSuccess:n})},b=t=>{confirm("هل أنت متأكد من حذف هذه الجهة؟")&&v(route("admin.directory.destroy",t))};return e.jsxs(I,{user:p.user,header:"دليل المدينة",children:[e.jsx(C,{title:"دليل المدينة"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:e.jsx("div",{className:"overflow-hidden bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"border-b border-gray-200 bg-white p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"قائمة الجهات والخدمات"}),e.jsx(h,{onClick:()=>m(),children:"إضافة جهة جديدة +"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"الاسم"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"الهاتف"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"النوع"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"التصنيف"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:g.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-500",dir:"ltr",children:t.phone})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4",children:e.jsx("span",{className:"inline-flex rounded-full bg-blue-100 px-2 text-xs font-semibold leading-5 text-blue-800",children:t.type})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:t.category==="official"?"رسمي":"شركة/خاص"}),e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium",children:[e.jsx("button",{onClick:()=>m(t),className:"ml-4 text-indigo-600 hover:text-indigo-900",children:"تعديل"}),e.jsx("button",{onClick:()=>b(t.id),className:"text-red-600 hover:text-red-900",children:"حذف"})]})]},t.id))})]})})]})})})}),e.jsx(S,{show:j,onClose:n,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"mb-4 text-lg font-medium text-gray-900",children:r?"تعديل جهة":"إضافة جهة جديدة"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",value:"الاسم"}),e.jsx(i,{id:"name",type:"text",className:"mt-1 block w-full",value:a.name,onChange:t=>s("name",t.target.value),required:!0}),d.name&&e.jsx("div",{className:"mt-1 text-sm text-red-500",children:d.name})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"phone",value:"رقم الهاتف"}),e.jsx(i,{id:"phone",type:"text",className:"mt-1 block w-full text-right",value:a.phone,onChange:t=>s("phone",t.target.value),dir:"ltr"}),d.phone&&e.jsx("div",{className:"mt-1 text-sm text-red-500",children:d.phone})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"type",value:"النوع (مثل: خدمي، أمني، انترنت)"}),e.jsx(i,{id:"type",type:"text",className:"mt-1 block w-full",value:a.type,onChange:t=>s("type",t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"category",value:"التصنيف العام"}),e.jsxs("select",{id:"category",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:a.category,onChange:t=>s("category",t.target.value),children:[e.jsx("option",{value:"official",children:"جهات رسمية"}),e.jsx("option",{value:"company",children:"شركات خاصة"}),e.jsx("option",{value:"emergency",children:"طوارئ"}),e.jsx("option",{value:"health",children:"صحة"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"latitude",value:"خط العرض (Latitude)"}),e.jsx(i,{id:"latitude",type:"text",className:"mt-1 block w-full text-left",value:a.latitude,onChange:t=>s("latitude",t.target.value),placeholder:"e.g. 33.456"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"longitude",value:"خط الطول (Longitude)"}),e.jsx(i,{id:"longitude",type:"text",className:"mt-1 block w-full text-left",value:a.longitude,onChange:t=>s("longitude",t.target.value),placeholder:"e.g. 36.234"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx(F,{onClick:n,children:"إلغاء"}),e.jsx(h,{disabled:N,children:r?"حفظ التعديلات":"إضافة"})]})]})]})})]})}export{T as default};
