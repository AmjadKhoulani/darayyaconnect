import{r as u,j as e,H as z,u as M,a as S}from"./app-D8KvjWtk.js";import{I as n}from"./InputLabel-BRD8LIjz.js";import{M as A}from"./Modal-BPd7OICR.js";import{P as f}from"./PrimaryButton-Dh_r8cXt.js";import{S as I}from"./SecondaryButton-mNu4VSb_.js";import{T as o}from"./TextInput-CGBozpgv.js";import{A as $}from"./AdminLayout-CUoQYiuf.js";import{c}from"./createLucideIcon-BYbfVwB1.js";import{M as T}from"./map-pin-DQJvyPG5.js";import{T as q}from"./trash-2-BivJtPye.js";import{C as D}from"./clock-BDVTWOiP.js";import{P as H}from"./phone-DWgXfvZr.js";import"./transition-B8_MZ8Ml.js";import"./dialog-DyzNh683.js";import"./with-selector-xWQZiVpH.js";const P=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],L=c("briefcase",P);const B=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],b=c("circle-check-big",B);const O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],E=c("circle-x",O);const F=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],V=c("file-text",F);const R=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],X=c("plus",R);const G=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],J=c("square-pen",G);function xe({auth:a,opportunities:l,applications:r}){const[s,x]=u.useState("opportunities");return e.jsxs($,{user:a.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"إدارة التطوع"}),children:[e.jsx(z,{title:"إدارة التطوع"}),e.jsxs("div",{className:"mx-auto max-w-7xl px-4 py-12",children:[e.jsxs("div",{className:"mb-8 flex gap-4 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>x("opportunities"),className:`relative px-4 pb-4 text-sm font-bold transition-colors ${s==="opportunities"?"text-emerald-600":"text-gray-500 hover:text-gray-700"}`,children:["فرص التطوع",s==="opportunities"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 rounded-t-full bg-emerald-600"})]}),e.jsxs("button",{onClick:()=>x("applications"),className:`relative px-4 pb-4 text-sm font-bold transition-colors ${s==="applications"?"text-emerald-600":"text-gray-500 hover:text-gray-700"}`,children:["طلبات المتقدمين",s==="applications"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 rounded-t-full bg-emerald-600"})]})]}),s==="opportunities"?e.jsx(K,{opportunities:l}):e.jsx(Q,{applications:r})]})]})}function K({opportunities:a}){const[l,r]=u.useState(!1),[s,x]=u.useState(null),{data:d,setData:i,post:y,put:N,delete:_,processing:w,errors:g,reset:p}=M({title:"",organization:"",description:"",location:"",spots_total:10,start_date:"",end_date:"",status:"open",role_type:"field",tags:[],image:""}),j=(t=null)=>{if(x(t),t)i({title:t.title,organization:t.organization||"",description:t.description,location:t.location||"",spots_total:t.spots_total||10,start_date:t.start_date?t.start_date.substring(0,16):"",end_date:t.end_date?t.end_date.substring(0,16):"",status:t.status,role_type:t.role_type||"field",tags:t.tags||[],image:t.image||""});else{p();const h=new Date;h.setDate(h.getDate()+1),h.setHours(9,0,0,0),i("start_date",h.toISOString().substring(0,16))}r(!0)},m=()=>{r(!1),x(null),p()},k=t=>{t.preventDefault(),s?N(route("admin.volunteering.update",s.id),{onSuccess:m}):y(route("admin.volunteering.store"),{onSuccess:m})},C=t=>{confirm("هل أنت متأكد من حذف هذه الفرصة؟")&&_(route("admin.volunteering.destroy",t))};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["قائمة الفرص المتاحة (",a.length,")"]}),e.jsxs(f,{onClick:()=>j(),children:[e.jsx(X,{size:16,className:"ml-2"}),"إضافة فرصة جديدة"]})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase text-gray-500",children:"العنوان"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase text-gray-500",children:"التنظيم"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase text-gray-500",children:"الموعد"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase text-gray-500",children:"المقاعد"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase text-gray-500",children:"الحالة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium uppercase text-gray-500",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-bold text-gray-900",children:t.title}),e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(T,{size:10})," ",t.location]})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:t.organization}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",dir:"ltr",children:t.start_date?new Date(t.start_date).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-1.5 w-full max-w-[60px] overflow-hidden rounded-full bg-gray-200",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${Math.min(100,t.spots_filled/t.spots_total*100)}%`}})}),e.jsxs("span",{className:"text-xs font-medium",children:[t.spots_filled,"/",t.spots_total]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${t.status==="open"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.status==="open"?"مفتوح":"مغلق"})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium",children:[e.jsx("button",{onClick:()=>j(t),className:"ml-3 text-indigo-600 hover:text-indigo-900",children:e.jsx(J,{size:16})}),e.jsx("button",{onClick:()=>C(t.id),className:"text-red-600 hover:text-red-900",children:e.jsx(q,{size:16})})]})]},t.id))})]})}),e.jsx(A,{show:l,onClose:m,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"mb-4 text-lg font-medium text-gray-900",children:s?"تعديل فرصة":"إضافة فرصة جديدة"}),e.jsxs("form",{onSubmit:k,className:"max-h-[70vh] space-y-4 overflow-y-auto px-1",children:[e.jsxs("div",{children:[e.jsx(n,{value:"عنوان الفرصة"}),e.jsx(o,{value:d.title,onChange:t=>i("title",t.target.value),className:"mt-1 w-full",required:!0}),g.title&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:g.title})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"الجهة المنظمة"}),e.jsx(o,{value:d.organization,onChange:t=>i("organization",t.target.value),className:"mt-1 w-full",required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{value:"الموقع"}),e.jsx(o,{value:d.location,onChange:t=>i("location",t.target.value),className:"mt-1 w-full"})]})]}),e.jsxs("div",{children:[e.jsx(n,{value:"الوصف والتفاصيل"}),e.jsx("textarea",{value:d.description,onChange:t=>i("description",t.target.value),className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:4,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"تاريخ البدء"}),e.jsx(o,{type:"datetime-local",value:d.start_date,onChange:t=>i("start_date",t.target.value),className:"mt-1 w-full",required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{value:"تاريخ الانتهاء"}),e.jsx(o,{type:"datetime-local",value:d.end_date,onChange:t=>i("end_date",t.target.value),className:"mt-1 w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"عدد المقاعد الكلي"}),e.jsx(o,{type:"number",value:d.spots_total,onChange:t=>i("spots_total",parseInt(t.target.value)),className:"mt-1 w-full",required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{value:"الحالة"}),e.jsxs("select",{value:d.status,onChange:t=>i("status",t.target.value),className:"mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:[e.jsx("option",{value:"open",children:"مفتوح"}),e.jsx("option",{value:"closed",children:"مغلق"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3 border-t border-gray-100 pt-4",children:[e.jsx(I,{onClick:m,type:"button",children:"إلغاء"}),e.jsx(f,{disabled:w,children:s?"حفظ التعديلات":"نشر الفرصة"})]})]})]})})]})}function Q({applications:a}){const l=a.filter(s=>s.status==="pending"),r=a.filter(s=>s.status==="approved");return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"mb-4 flex items-center gap-2 text-lg font-bold text-slate-800",children:[e.jsx(D,{className:"text-amber-500"}),"طلبات الانتظار (",l.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:l.length>0?l.map(s=>e.jsx(v,{app:s},s.id)):e.jsx("div",{className:"col-span-full rounded-xl border border-dashed border-slate-300 bg-white py-8 text-center text-slate-400",children:"لا يوجد طلبات معلقة"})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"mb-4 flex items-center gap-2 text-lg font-bold text-slate-800",children:[e.jsx(b,{className:"text-emerald-500"}),"المتطوعين النشطين (",r.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(s=>e.jsx(v,{app:s,approved:!0},s.id))})]})]})}function v({app:a,approved:l=!1}){const r=s=>{confirm(`هل أنت متأكد من ${s==="approved"?"قبول":"رفض"} هذا الطلب؟`)&&S.put(route("admin.volunteering.application.update",a.id),{status:s})};return e.jsxs("div",{className:"group relative rounded-xl border border-slate-200 bg-white p-4 shadow-sm transition-colors hover:border-emerald-500",children:[e.jsxs("div",{className:"mb-4 flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center overflow-hidden rounded-full bg-slate-100 font-bold text-slate-500",children:a.full_name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800",children:a.full_name}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[e.jsx(H,{size:12}),e.jsx("span",{dir:"ltr",children:a.phone_number})]})]})]}),!l&&e.jsx("span",{className:"rounded-full border border-amber-100 bg-amber-50 px-2 py-0.5 text-[10px] font-bold text-amber-600",children:"جديد"})]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("div",{className:"mb-1 text-xs font-bold text-gray-500",children:["متقدم لـ:"," ",e.jsx("span",{className:"text-emerald-600",children:a.opportunity?.title||"فرصة محذوفة"})]}),e.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-slate-50 p-2",children:[e.jsx(L,{size:14,className:"mt-0.5 text-slate-400"}),e.jsx("p",{className:"line-clamp-2 text-sm text-slate-600",children:a.skills||"لا يوجد مهارات مسجلة"})]}),a.motivation&&e.jsxs("div",{className:"flex items-start gap-2 rounded-lg bg-slate-50 p-2",children:[e.jsx(V,{size:14,className:"mt-0.5 text-slate-400"}),e.jsx("p",{className:"line-clamp-2 text-sm text-slate-600",children:a.motivation})]})]}),e.jsx("div",{className:"flex items-center gap-2 border-t border-slate-100 pt-2",children:l?e.jsx("button",{className:"w-full cursor-not-allowed rounded-lg bg-slate-100 py-2 text-xs font-bold text-slate-500",children:"تم القبول"}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>r("approved"),className:"flex flex-1 items-center justify-center gap-2 rounded-lg bg-emerald-600 py-2 text-sm font-bold text-white transition hover:bg-emerald-700",children:[e.jsx(b,{size:16})," قبول"]}),e.jsxs("button",{onClick:()=>r("rejected"),className:"flex flex-1 items-center justify-center gap-2 rounded-lg border border-slate-200 bg-white py-2 text-sm font-bold text-slate-600 transition hover:border-rose-200 hover:bg-rose-50 hover:text-rose-600",children:[e.jsx(E,{size:16})," رفض"]})]})})]})}export{xe as default};
